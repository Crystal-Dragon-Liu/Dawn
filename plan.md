# 说明

"*" 表示待完成任务

other 标签下的任务不需要做记号，完成即删除

# 开发

## other

辅助设施：
- LOG宏
  - 需要能够接收任意类型和数量的参数
  - 能够打印例如时间等更多的信息，并且能够控制打印内容

## 存储层

### 磁盘管理

总体功能：
- 对内负责初始化磁盘管理的元数据
- 对外负责普通页面的读写分配和回收
- 对外负责日志页面的读写

任务：
- 磁盘管理初始化
  - 元数据文件存在的初始化
  - 元数据文件不存在的初始化
- 普通页面管理
  - 读页面
  - 写页面
  - 分配新页面
  - 释放页面
- *并发使用DiskManager(待计划)
- *日志页面管理(待计划)
- *定期裁剪文件大小(待计划)
- *对元数据文件的logging和recovery(待计划)

### 页面布局

## 缓冲池

总体功能：
- 对外分配和回收页面，外部向BMP请求或者归还页面，后者把页面给它或者处理归还页面
- 对内决定页面的去留，视情况将页面从内存删除并冲刷回磁盘

任务：
- clock replacer的实现
- *buffer pool manager的实现

## 索引层

待计划

## 执行器

待计划

## 查询计划

待计划

############################################################

# 测试

## other

打开内存泄漏检测

磁盘管理测试的辅助：
- 创建几个已经有内容的元数据文件和相关的.db .log文件，方便以后反复使用

## 存储层

### 磁盘管理

- 磁盘管理初始化
  - 元数据文件存在的初始化
    - 正确收集page id信息
  - 元数据文件不存在的初始化
- 普通页面管理
  - 读、写、分配和释放页面
  - *并发分配和释放页面

## 缓冲池

- clock replacer非并发
  - *unpin一些页框，能够把它们全部逐出
  - *unpin一些页框，pin其中的一部分，剩下的全部逐出
  - *逐出时没有可逐出页框，等待，放入页框后成功逐出
- *clock replacer并发

## 索引层

待计划

## 执行器

待计划

## 查询计划

待计划